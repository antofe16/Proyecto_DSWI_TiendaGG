@model IEnumerable<Proyecto_DSWI_TiendaGG.Models.Detalle>

@{
    ViewBag.Title = "Comprar";
    int p = (int)ViewBag.p;
    int c = (int)ViewBag.c;
}

<style>
    #botones {
        margin: 10px 0 10px 0;
        padding: 5px 5px 5px 5px;
        text-align: center;
    }

    .imgprod {
        border: solid 5px #e4b210;
        border-radius: 5px;
    }

    figcaption {
        font-size: 16pt;
        text-align: center;
    }

    .contenedor {
        display: flex;
        flex-direction: column;
    }

    .seccion {
        margin: 20px auto;
        width: 100%;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-around;
        border: 5px solid #f2b31d;
        padding: 10px;
        background-color: rgba(255, 255, 255, 0);
    }

    figure {
        width: 30%;
        border: 5px solid darkgoldenrod;
        border-radius: 50px;
        padding: 5px;
        text-align: center;
        background-color: rgba(255, 255, 255, 0);
    }

    .figimg {
        margin-left: 12px;
        margin-right: 4px;
        border-radius: 5px;
        margin-top: 10px;
    }

    figcaption {
        text-align: left;
        padding: 10px;
        margin: 5px;
    }

    .btn-warning, .btn-danger {
        font-size: 18pt;
        color: white;
        margin: 3px 1px 3px 1px;
    }

    h2, h1 {
        color: white;
    }

    .contnull {
        padding: 50px 10% 50px 20%;
    }

    .null {
        border: solid 5px #808080
    }
</style>

<h1 style="text-align:center;">Carrito de Compras</h1>
@{
    if (Model.Count() == 0) {
    <div class="contnull">
        <img class="null" src="~/img/gif/null.gif" width="900px" height="500px" />
        <br />
        <h2 style="margin: 1px 10% 1px 20%">Tu carrito esta vacio :'(</h2>
    </div>
    }
    else {
<div class="form_wrapper" style="display: flex; flex-direction: column; width:100%;">
    <section style="margin: 20px auto;
	width: 95%;
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	justify-content: space-around;
	padding: 20px;
	background-color: white;">

        @foreach (var item in Model)
        {
        <figure>
            <img class="figimg" src="@Url.Content(item.img_det)" height="300" width="300">
            <figcaption>
                <strong>@item.desc_det</strong>
            </figcaption>
            <figcaption>
                <strong>Precio : </strong>S/.@item.pre_pro
            </figcaption>
            <figcaption>
                <strong>Cantidad : </strong>@item.can_pro
            </figcaption>
            <figcaption>
                @Html.ActionLink("Quitar", "Quitar", new { cod = item.cod_prod }, new { @class = "btn btn-warning" })
            </figcaption>
        </figure>
        }

    </section>
    <div class="input_field">
        <span><i aria-hidden="true" class="fas fa-money-bill"></i></span>
        <input value="@ViewBag.total" type="text" readonly class="form-control" />
    </div>
    <div id="botones">
        @Html.ActionLink("<<",
                             "Comprar",
                             "Negocios",
                             new { p = p, op = "-"},
                             new { @class = "btn btn-warning", @style = "color : white;" })
        @for (int i = 0; i < (int)ViewBag.pags; i++)
        {
            if (c == 0)
            {
                <em>Haz una busqueda ;)</em>
            }
            if (i == (int)ViewBag.p)
            {
                @Html.ActionLink((i + 1).ToString(),
                               "Comprar",
                               "Negocios",
                               new { p = i },
                               new { @class = "btn btn-danger", @style = "color : white;" })
            }
            else
            {
                @Html.ActionLink((i + 1).ToString(),
                             "Comprar",
                             "Negocios",
                             new { p = i},
                             new { @class = "btn btn-warning" })
            }


        }
        @Html.ActionLink(">>",
                               "Comprar",
                               "Negocios",
                               new { p = p, op = "+"},
                               new
                                   {
                                       @class = "btn btn-warning",
                                   @style = "color : white;"
                                   })
    </div>
</div>

    }
 }

<br />
    <div>
        <h2>@ViewBag.mensaje</h2>
    </div>
    <br />

    @Html.ActionLink("Ir a pagar", "Pago", null, new { @class = "btn btn-warning" })
    @Html.ActionLink("Agregar mas productos", "VistaProductos", new { idcat="C00"}, new { @class = "btn btn-danger" })